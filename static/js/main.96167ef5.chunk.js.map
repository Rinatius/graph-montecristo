{"version":3,"sources":["Cards/utils/translate.js","config.js","Cards/NestedLinks.js","Cards/utils/shorten.js","Cards/utils/formatDate.js","Cards/NestedProperties.js","Cards/Card.js","MGraph/MGraph.js","components/graphHelpers.js","components/GraphComponent.js","SideBar/AppSideBar.js","App.js","serviceWorker.js","index.js"],"names":["tranlate_word","word","language","ru","cardConfig","KgMinjust","label","style","backgroundColor","icon","fontSize","svg","subHeaderUrlParam","subHeaderText","contentTextParam","properties","links","reverseLinks","KgMinjustParticipants","HeadNameSur","KgProcurementParticipants","KgProcurementLots","KgProcurement","KgProcurementEntitiesWithAddresses","relationshipConfig","CONTROLS","linkConf","ANNOUNCED","DIRECTOR","INCLUDES_LOTS","NAME_SAKE","NAME_SAKE_INDIVIDUAL","PROBABLE_FATHER","PARTICIPATED_IN","value","regex","color","PROBABLE_SIBLING","PROBABLE_KID","SAME_INN","useStyles","makeStyles","theme","root","palette","background","paper","padding","nested","paddingLeft","spacing","listItemIcon","minWidth","React","memo","props","classes","useState","iEdges","vGraph","toJS","nodes","edges","iGraph","listOfRelationships","Object","keys","map","key","node","id","toString","source","target","type","reduce","obj","relation","object","labels","listOfLinks","includes","filter","element","undefined","getKeyRelationshipIds","newKey","length","ListItem","button","onClick","onButtonClick","ListItemText","primary","translate","primaryTypographyProps","variant","ListItemIcon","className","List","component","aria-labelledby","prevProps","nextProps","shorten","phrase","RegExp","replace","formatDate","d","date","Date","time","getHours","getMinutes","day","getDate","month","getMonth","getFullYear","fontWeight","marginBottom","listOfProps","forEach","prop","push","Typography","console","log","maxWidth","textAlign","height","media","expand","transform","marginLeft","transition","transitions","create","duration","shortest","expandOpen","avatar","red","cardContent","paddingTop","paddingBottom","cardRef","useRef","width","dimensions","setDimensions","getDimensions","useEffect","current","offsetWidth","offsetHeight","subheader","href","Card","ref","CardHeader","Avatar","aria-label","action","IconButton","onMinimizeClick","CardContent","Divider","marginTop","objNode","setDim","window","innerHeight","windowHeight","setWindowHeight","innerWidth","windowWidth","setWindowWidth","handleResize","addEventListener","removeEventListener","myConfig","staticGraphWithDragAndDrop","newCoords","labelProperty","link","highlightColor","renderLabel","graphRef","handlePosChange","state","coords","entries","x","y","returnCoords","config","data","dispGraph","values","visibleGraph","cardNodeIds","dispLabel","viewGenerator","n","dim","invisibleGraph","CardConfig","size","highlightFontSize","hasOwnProperty","clearLink","result","conf","toLowerCase","substring","displayGraph","onNodePositionChange","nodeId","onDoubleClickNode","onNodeClick","toGraph","graph","records","i","nodge","get","identity","low","start","end","reconcileGraphs","GraphComponent","driver","neo4j","Immutable","fromJS","showSpinner","showSmallSpinner","clearGraphs","setState","goClick","query","errorMessage","executeQuery","cypherQuery","session","run","then","updatedVisibleGraph","gh","paramIDs","updateInvisible","catch","error","close","invisibleSession","updatedInvisibleGraph","mergeGraphs","ids","removeElements","innocentNodes","findNodes","nodeToRemove","String","handleButtonClick","every","el","removeFromArray","idIndex","indexOf","parseInt","splice","addToArray","handleMinimezeClick","handleNodeClick","returnSpinner","position","top","left","CircularProgress","returnSmallSpinner","Grid","container","alignContent","direction","right","paddingRight","Box","isGoClick","this","isClearGraph","clearClick","edgeIds","foundNodes","nodeKey","edgeId","Component","display","appBar","boxShadow","easing","sharp","leavingScreen","appBarShift","easeOut","enteringScreen","menuButton","marginRight","hide","drawer","flexShrink","drawerPaper","drawerHeader","alignItems","mixins","toolbar","justifyContent","content","flexGrow","contentShift","searchBar","border","borderRadius","PersistentDrawerLeft","useTheme","open","setOpen","CssBaseline","AppBar","clsx","Toolbar","edge","TextField","searchText","onChange","handleSearchTextChange","placeholder","onKeyPress","event","handleGoClick","InputProps","disableUnderline","inputProps","Tooltip","title","handleResetClick","handleClearClick","Drawer","anchor","text","index","multiline","handleCypherQueryTextChange","Button","GoButton","startIcon","JSON","stringify","nodeCoords","children","axios","require","default","App","clearGraph","listOfNodes","showPagination","handlePaginationChange","join","fetchData","urlString","url","params","token","response","message","handleError","returnPagination","justify","bottom","WebkitTransform","Pagination","count","showFirstButton","showLastButton","queryString","parse","location","search","decode","dec","decodeURI","Boolean","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.96167ef5.chunk.js","sourcesContent":["import ru from './translationFiles/ru.json'\r\n\r\nconst tranlate_word = (word, language) => {\r\n    if (word in ru) {\r\n        if (language == 'ru') {\r\n            return ru[word]\r\n    }}\r\n    else {\r\n        return word\r\n    }      \r\n}\r\n\r\nexport default tranlate_word;","import React from 'react'\r\nimport BusinessIcon from '@material-ui/icons/Business';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport GavelIcon from '@material-ui/icons/Gavel';\r\nimport AccountBalanceIcon from '@material-ui/icons/AccountBalance';\r\nimport MonetizationOnIcon from '@material-ui/icons/MonetizationOn';\r\n\r\n\r\nconst cardConfig = {\r\n    KgMinjust: {\r\n        label: 'KgMinjust',\r\n        style: {backgroundColor: '#fbc02d'},\r\n        icon: <BusinessIcon  style={{ fontSize: 30 }}/>,\r\n        svg: 'https://raw.githubusercontent.com/aleks-walker/graph-montecristo-config/8f8c6843a73515bd2deb47f4b80b8cdf9c0d2451/businessYellow.svg',\r\n        subHeaderUrlParam: 'url',\r\n        subHeaderText: 'Минюст',\r\n        contentTextParam: 'name_ru',\r\n        properties: ['inn', 'head_name_sur', 'region', 'district', 'street', 'home', 'apartment'],\r\n        links: ['CONTROLS', 'DIRECTOR', 'SAME_INN'],\r\n        reverseLinks: {}\r\n    },\r\n    KgMinjustParticipants: {\r\n        label: 'KgMinjustParticipants',\r\n        style: {backgroundColor: '#fbc02d'},\r\n        icon: <AccountCircleIcon style={{ fontSize: 30 }}/>,\r\n        svg: 'https://raw.githubusercontent.com/aleks-walker/graph-montecristo-config/8f8c6843a73515bd2deb47f4b80b8cdf9c0d2451/accountYellow.svg',\r\n        subHeaderUrlParam: 'org_url',\r\n        subHeaderText: 'Минюст',\r\n        contentTextParam: 'name',\r\n        properties: ['name'],\r\n        links: ['CONTROLS', 'NAME_SAKE', 'PROBABLE_FATHER', 'PROBABLE_SIBLING', 'PROBABLE_KID'],\r\n        reverseLinks: {}\r\n    },\r\n    HeadNameSur: {\r\n        label: 'HeadNameSur',\r\n        style: {backgroundColor: '#fbc02d'},\r\n        icon: <AccountCircleIcon  style={{ fontSize: 30 }}/>,\r\n        svg:  'https://raw.githubusercontent.com/aleks-walker/graph-montecristo-config/8f8c6843a73515bd2deb47f4b80b8cdf9c0d2451/accountYellow.svg',\r\n        subHeaderUrlParam: '',\r\n        subHeaderText: 'Минюст',\r\n        contentTextParam: 'head_name_sur',\r\n        properties: ['head_name_sur'],\r\n        links: ['DIRECTOR', 'NAME_SAKE', 'PROBABLE_FATHER', 'PROBABLE_SIBLING', 'PROBABLE_KID'],\r\n        reverseLinks: {}\r\n    },\r\n    KgProcurementParticipants: {\r\n        label: 'KgProcurementParticipants',\r\n        style: {backgroundColor: '#00897b'},\r\n        icon: <BusinessIcon style={{ fontSize: 30 }}/>,\r\n        svg: 'https://raw.githubusercontent.com/aleks-walker/graph-montecristo-config/8f8c6843a73515bd2deb47f4b80b8cdf9c0d2451/busiessGreen.svg',\r\n        subHeaderUrlParam: '',\r\n        subHeaderText: 'Госзакупки',\r\n        contentTextParam: 'name',\r\n        properties: ['inn'],\r\n        links: ['PARTICIPATED_IN', 'NAME_SAKE_INDIVIDUAL'],\r\n        reverseLinks: {}\r\n    }, \r\n    KgProcurementLots: {\r\n        label: 'KgProcurementLots',\r\n        style: {backgroundColor: '#00897b'},\r\n        icon: <GavelIcon style={{ fontSize: 30 }}/>,\r\n        svg:  'https://raw.githubusercontent.com/aleks-walker/graph-montecristo-config/8f8c6843a73515bd2deb47f4b80b8cdf9c0d2451/gavelGreen.svg',\r\n        subHeaderUrlParam: 'tender_url',\r\n        subHeaderText: 'Госзакупки',\r\n        contentTextParam: 'lot_name',\r\n        properties: ['lot_name', 'lot_sum_int'],\r\n        links: ['PARTICIPATED_IN', 'INCLUDES_LOTS'],\r\n        reverseLinks: {'PARTICIPATED_IN':'PARTICIPANTS',\r\n                        'INCLUDES_LOTS': 'TENDER'}\r\n    },\r\n    KgProcurement: {\r\n        label: 'KgProcurement',\r\n        style: {backgroundColor: '#00897b'},\r\n        icon: <MonetizationOnIcon style={{ fontSize: 30 }}/>,\r\n        svg:  'https://raw.githubusercontent.com/aleks-walker/graph-montecristo-config/13c35330a9b7ae752e04638edb39068555ae9374/monetizeGreen.svg',\r\n        subHeaderUrlParam: 'url',\r\n        subHeaderText: 'Тендер',\r\n        contentTextParam: 'procurement_object_no_quotes',\r\n        properties: ['procurement_method', 'publication_date'],\r\n        links: ['ANNOUNCED', 'INCLUDES_LOTS'],\r\n        reverseLinks: {'ANNOUNCED':'ENTITY'}\r\n    },\r\n    KgProcurementEntitiesWithAddresses: {\r\n        label: 'KgProcurementEntitiesWithAddresses',\r\n        style: {backgroundColor: '#00897b'},\r\n        icon: <AccountBalanceIcon style={{ fontSize: 30 }}/>,\r\n        svg:  'https://raw.githubusercontent.com/aleks-walker/graph-montecristo-config/83020b7357a5888d237b3661800fec934f692be8/orgTenderGreen.svg',\r\n        subHeaderUrlParam: '',\r\n        subHeaderText: 'Закупающая организация',\r\n        contentTextParam: 'procuring_entity', \r\n        properties: ['district'],\r\n        links: ['ANNOUNCED'],\r\n        reverseLinks: {}\r\n    }\r\n}\r\n\r\nexport default cardConfig\r\n\r\n\r\nexport const relationshipConfig = {\r\n    \r\n    CONTROLS: {\r\n        properties: [],\r\n        linkConf: {'fontSize' : 14}\r\n    },\r\n    ANNOUNCED: {\r\n        properties: [],\r\n        linkConf: {'fontSize' : 14}\r\n    },\r\n    DIRECTOR: {\r\n        properties: [],\r\n        linkConf: {'fontSize' : 14}\r\n    },\r\n    INCLUDES_LOTS: {\r\n        properties: [],\r\n        linkConf: {'fontSize' : 14}\r\n    },\r\n    NAME_SAKE: {\r\n        properties: [],\r\n        linkConf: {'fontSize' : 14}\r\n    },\r\n    NAME_SAKE_INDIVIDUAL: {\r\n        properties: [],\r\n        linkConf: {'fontSize' : 14}\r\n    },\r\n    PROBABLE_FATHER: {\r\n        properties: [],\r\n        linkConf: {'fontSize' : 14}\r\n    },\r\n    PARTICIPATED_IN: {\r\n        properties: ['proposed_price', 'result'],\r\n        'result': [{\r\n            value: '(Подтверждено)',\r\n            regex: true,\r\n            color: \"red\"\r\n        }],\r\n        linkConf: {'fontSize' : 14}\r\n    },\r\n    PROBABLE_SIBLING: {\r\n        properties: [],\r\n        linkConf: {'fontSize' : 14}\r\n    },\r\n    PROBABLE_KID: {\r\n        properties: [],\r\n        linkConf: {'fontSize' : 14}\r\n    },\r\n    SAME_INN: {\r\n        properties: [],\r\n        linkConf: {'fontSize' : 14}\r\n    },\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\r\nimport DraftsIcon from '@material-ui/icons/Drafts';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport ExpandLess from '@material-ui/icons/ExpandLess';\r\nimport ExpandMore from '@material-ui/icons/ExpandMore';\r\nimport StarBorder from '@material-ui/icons/StarBorder';\r\n\r\nimport BubbleChartIcon from '@material-ui/icons/BubbleChart';\r\nimport AccountTreeIcon from '@material-ui/icons/AccountTree';\r\n\r\nimport translate from './utils/translate'\r\nimport cardConfig from '../config'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    padding: '1px',\r\n  },\r\n  nested: {\r\n    paddingLeft: theme.spacing(4),\r\n    padding: '1px'\r\n  },\r\n  listItemIcon: {\r\n    minWidth: 'auto'\r\n  }\r\n}));\r\n\r\nconst NestedLinks = (props) => {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(true);\r\n\r\n  const handleClick = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  // console.log(props.node)\r\n  // console.log(props.vGraph.toJS())\r\n  // console.log(props.iGraph.toJS()) \r\n\r\n  const vNodes = props.vGraph.toJS().nodes\r\n  const vEdges = props.vGraph.toJS().edges\r\n\r\n  const iNodes = props.iGraph.toJS().nodes\r\n  const iEdges = props.iGraph.toJS().edges\r\n  \r\n\r\n  let listOfRelationships = Object.keys(iEdges).map((key) => {\r\n    if (props.node.id.toString() == iEdges[key].source.toString() || props.node.id.toString() == iEdges[key].target.toString()){\r\n      return iEdges[key].type\r\n    }\r\n  }).reduce(function(obj, relation){\r\n      if (!obj[relation]) {\r\n          obj[relation] = 1;\r\n      } else {\r\n          obj[relation]++;\r\n      }\r\n      return obj;\r\n  }, {});\r\n\r\n   //Delete 'undefined' in listOfRelationships\r\n   listOfRelationships = Object.keys(listOfRelationships).reduce((object, key) => {\r\n    if (key !== 'undefined') {\r\n      object[key] = listOfRelationships[key]\r\n    }\r\n    return object\r\n  }, {})\r\n \r\n  const getKeyRelationshipIds = (type) => {\r\n    let keys = Object.keys(iEdges).map((key) => {\r\n      if ((iEdges[key].type == type) && (props.node.id.toString() == iEdges[key].source.toString() || props.node.id.toString() == iEdges[key].target.toString())){\r\n        return key\r\n      }\r\n    })\r\n\r\n    keys = keys.filter(function( element ) {\r\n      return element !== undefined;\r\n    });\r\n\r\n    return keys\r\n  };\r\n\r\n  const label = props.node.labels[0]\r\n\r\n  let listOfLinks = Object.keys(listOfRelationships).map((key) => {\r\n    if (cardConfig[label] \r\n        && cardConfig[label].links \r\n        && cardConfig[label].links.includes(key)) {\r\n      const keys = getKeyRelationshipIds(key)\r\n\r\n      let newKey = ''\r\n\r\n      // if node.reverseLinks AND key in reverseLinks: \r\n      \r\n      if (Object.keys(cardConfig[label].reverseLinks).length !== 0 && Object.keys(cardConfig[label].reverseLinks).includes(key)) {\r\n        newKey = cardConfig[label].reverseLinks[key]\r\n        //console.log(\"1 LIST OF RELS:\", listOfRelationships, \"| KEY:\", key, \"| NODE: \", label)\r\n        //console.log(\"2 KEY: \", key, \"| NEW KEY:\", newKey, \"| reverseLinks: \", cardConfig[label].reverseLinks)\r\n      }\r\n      else {\r\n        newKey = key\r\n      }\r\n  \r\n          \r\n      return(\r\n        <ListItem key={key} style={{padding: '1px'}} button onClick={() => props.onButtonClick(keys)}>          \r\n          <ListItemText primary={translate(newKey, 'ru') + ' (' + listOfRelationships[key] + ')'} primaryTypographyProps={{variant:\"body2\"}} />\r\n          <ListItemIcon className={classes.listItemIcon}>\r\n            <AccountTreeIcon />\r\n          </ListItemIcon>\r\n        </ListItem>)\r\n    }\r\n  })\r\n\r\n\r\n  return (\r\n    <List\r\n      component=\"nav\"\r\n      aria-labelledby=\"nested-list-subheader\"\r\n      className={classes.root}\r\n    >\r\n      {listOfLinks}\r\n    </List>\r\n  );\r\n}\r\n\r\nconst areEqual = (prevProps, nextProps) => {\r\n  return ((prevProps.vGraph === nextProps.vGraph) && \r\n          (prevProps.iGraph === nextProps.iGraph) &&\r\n          (prevProps.node === nextProps.node));\r\n}\r\n\r\nexport default React.memo(NestedLinks, areEqual);","const shorten = (phrase) => {\r\n  const regex = new RegExp(\"общество с ограниченной ответственностью\", \"i\")\r\n  return phrase.replace(regex, \"ОсОО\")\r\n}\r\n\r\nexport default shorten;","const formatDate = (d) => {\r\n    let date = new Date(d)\r\n    let hours = date.getHours();\r\n    let minutes = date.getMinutes();\r\n    let time = hours + ':' + minutes\r\n    let day = date.getDate()\r\n    let month = date.getMonth() + 1\r\n    let year = date.getFullYear()\r\n\r\n    month = month < 10 ? '0' + month : month\r\n    day = day < 10 ? '0' + day : day\r\n\r\n    return day + \".\" + month + \".\" + year + \" \" + time \r\n  }\r\n\r\nexport default formatDate;","import React from 'react'\r\nimport Typography from '@material-ui/core/Typography';\r\nimport cardConfig from '../config'\r\nimport shorten from './utils/shorten'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport translate from '../Cards/utils/translate';\r\nimport formatDate from '../Cards/utils/formatDate';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    contentTextParam: {\r\n        fontWeight: \"bold\",\r\n        marginBottom: \"5px\"\r\n    }\r\n}));\r\n\r\nconst NestedProperties = (props) => {\r\n    const classes = useStyles();\r\n    let listOfProps = []\r\n    const label = props.node.labels[0]\r\n    if (Object.keys(cardConfig).includes(label)) {\r\n        cardConfig[label].properties.forEach(prop => {\r\n        if (cardConfig[label].properties \r\n                && cardConfig[label].properties.includes(prop)\r\n                && cardConfig[label].contentTextParam !== prop) {\r\n            listOfProps.push(\r\n                <Typography key={prop + label} variant=\"body2\" color=\"textPrimary\" component=\"p\">\r\n                    {prop === 'publication_date' ? translate(prop, 'ru') + ': ' + formatDate(props.node.properties[prop]) : translate(prop, 'ru') + ': ' +props.node.properties[prop] }\r\n                </Typography>\r\n            )\r\n        }\r\n        });\r\n    }\r\n    console.log( props.node.properties[cardConfig[label].contentTextParam] )\r\n    return (\r\n        <div>\r\n            <Typography className={classes.contentTextParam} variant=\"body2\" color=\"textPrimary\" component=\"p\" >\r\n                { shorten(props.node.properties[cardConfig[label].contentTextParam]) }\r\n            </Typography>\r\n        {listOfProps}\r\n        </div>\r\n    )\r\n}\r\nconst areEqual = (prevProps, nextProps) => {\r\n  return (prevProps.node.properties === nextProps.node.properties)\r\n}\r\n\r\nexport default React.memo(NestedProperties, areEqual);","import React, { useRef, useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { red } from '@material-ui/core/colors';\r\n\r\nimport MinimizeIcon from '@material-ui/icons/Minimize';\r\nimport Divider from '@material-ui/core/Divider'\r\n\r\nimport NestedLinks from './NestedLinks'\r\nimport NestedProperties from './NestedProperties'\r\nimport cardConfig from '../config'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n      maxWidth: 240,\r\n      textAlign: \"left\",\r\n      height : \"auto\"\r\n    },\r\n    media: {\r\n      height: 0,\r\n      // paddingTop: '56.25%', // 16:9\r\n    },\r\n    expand: {\r\n      transform: 'rotate(0deg)',\r\n      marginLeft: 'auto',\r\n      transition: theme.transitions.create('transform', {\r\n        duration: theme.transitions.duration.shortest,\r\n      }),\r\n    },\r\n    expandOpen: {\r\n      transform: 'rotate(180deg)',\r\n    },\r\n    avatar: {\r\n      backgroundColor: red[500],\r\n    },\r\n    cardContent: {\r\n      paddingTop: 0,\r\n      paddingBottom: 0,\r\n      \"&:last-child\": {\r\n        paddingBottom: 7\r\n      }\r\n    },\r\n  }));\r\n\r\n  const RecipeReviewCard = (props) => {\r\n\r\n  const cardRef = useRef();\r\n  const [dimensions, setDimensions] = useState({ width:0, height: 0 });\r\n  props.getDimensions(dimensions.height, props.node.id)\r\n\r\n  useEffect(() => {\r\n    if (cardRef.current) {\r\n      setDimensions({\r\n        width: cardRef.current.offsetWidth * 10,\r\n        height: cardRef.current.offsetHeight * 10 + 20\r\n      });\r\n    }\r\n  }, []);\r\n    \r\n    const classes = useStyles();\r\n\r\n    let style = {}\r\n    let avatar = ''\r\n    let subheader = ''\r\n    if (Object.keys(cardConfig).includes(props.node.labels[0])) {\r\n      const label = props.node.labels[0]\r\n      style = cardConfig[label].style \r\n      avatar = cardConfig[label].icon \r\n      subheader =\r\n        <a \r\n          href={props.node.properties[cardConfig[label].subHeaderUrlParam]} \r\n          target=\"_blank\">{cardConfig[label].subHeaderText}\r\n        </a>\r\n    }\r\n    return (\r\n      <Card className={classes.root} ref={cardRef}>\r\n        <CardHeader\r\n          avatar={\r\n            <Avatar aria-label=\"recipe\" className={classes.avatar} style={style}>\r\n              {avatar}\r\n            </Avatar>\r\n          }\r\n          action={\r\n            <IconButton aria-label=\"settings\">\r\n              <MinimizeIcon onClick={() => props.onMinimizeClick(props.node.id)}/>\r\n            </IconButton>\r\n          }\r\n          subheader={<Typography>{subheader}</Typography>} \r\n        />\r\n        <CardContent classes={{root: classes.cardContent}} >\r\n          <NestedProperties node={props.node}/>\r\n          <Divider style={{marginTop: 8}} />\r\n          <NestedLinks\r\n            node={props.node}\r\n            vGraph={props.vGraph}\r\n            iGraph={props.iGraph}\r\n            onButtonClick={props.onButtonClick}  />\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n  \r\n  const areEqual = (prevProps, nextProps) => {\r\n    return ((prevProps.vGraph === nextProps.vGraph) && \r\n            (prevProps.iGraph === nextProps.iGraph)); //&&\r\n            //(prevProps.node === nextProps.node));\r\n  }\r\n  \r\n  export default React.memo(RecipeReviewCard, areEqual);","import React, { useState, useEffect, useRef } from \"react\";\r\nimport {Graph} from \"react-d3-graph\";\r\nimport Card from '../Cards/Card';\r\nimport CardConfig from '../config';\r\nimport translate from '../Cards/utils/translate';\r\nimport shorten from '../Cards/utils/shorten';\r\nimport {relationshipConfig} from '../config';\r\n\r\nconst objNode = {}\r\nconst MGraph = (props) => {\r\n  const [dim, setDim] = useState({}) // DO NOT DELETE\r\n\r\n  const displayGraph = (props) => {\r\n    const dispGraph = {\r\n      nodes: Object.values(props.visibleGraph.toJS().nodes),\r\n      links: Object.values(props.visibleGraph.toJS().edges),\r\n    }\r\n\r\n    let cardNodeIds = props.cardNodeIds.toJS()\r\n    //console.log('mgraph card nodes: ', cardNodeIds)\r\n    dispGraph.nodes = dispGraph.nodes.map((node) => {\r\n      // if node.id is in array, apply viewGenerator\r\n      if (cardNodeIds.includes(node.id)) {\r\n        \r\n        node.fontSize = 16\r\n        node.dispLabel = \" \"\r\n        node.viewGenerator = (n) => {\r\n          const getDimensions = (dim, id) => {\r\n             setDim(dim)\r\n             objNode[id] = dim\r\n          }\r\n          return <Card\r\n            node={n}\r\n            getDimensions={getDimensions}\r\n            vGraph={props.visibleGraph}\r\n            iGraph={props.invisibleGraph}\r\n            onButtonClick={props.onButtonClick}\r\n            onMinimizeClick={props.onMinimizeClick}/>\r\n        }\r\n      } else { // else return SVG icon\r\n        node.svg = CardConfig[node.labels[0]].svg\r\n        node.size = 600\r\n        node.fontSize = 16\r\n        node.highlightFontSize = 24\r\n        node.dispLabel = shorten(node.properties[CardConfig[node.labels[0]].contentTextParam])\r\n      }\r\n\r\n      return node\r\n    })\r\n\r\n    ///// Dynamic height\r\n    dispGraph.nodes = dispGraph.nodes.map((node) => {\r\n      if (cardNodeIds.includes(node.id)) {\r\n        node.size = {\r\n          height: objNode[node.id],\r\n          width: 2400\r\n        }\r\n      }\r\n      if (props.newCoords && props.newCoords.hasOwnProperty(node.id)) {\r\n        node.x = props.newCoords[node.id].x\r\n        node.y = props.newCoords[node.id].y\r\n      }\r\n      return node\r\n    })\r\n    ////\r\n\r\n    dispGraph.links = dispGraph.links.map((clearLink) => {\r\n\r\n      const link = {...clearLink, ...relationshipConfig[clearLink.type].linkConf}\r\n\r\n      // if PARTICIPATED_IN.properties not empty\r\n      if (relationshipConfig[link.type].properties.length !== 0) {\r\n\r\n        relationshipConfig[link.type].result.forEach(conf => {\r\n          // if node.result in value AND regex=true\r\n          if (conf.value.toLowerCase().includes(link.properties.result.substring(0, 7).toLowerCase()) && conf.regex) {\r\n            link.color = conf.color\r\n          } else {\r\n            console.log(\"LINK NOT RED\")\r\n          }\r\n        });\r\n\r\n        let label = ''\r\n        for (let value of Object.values((relationshipConfig[link.type].properties))) { // for [proposed_price, result]\r\n          label = label + link.properties[value] + ' '\r\n        }\r\n        link.dispLabel = label\r\n      }\r\n      // if PARTICIPATED_IN.properties IS empty\r\n      else {\r\n        link.dispLabel = translate(link.type, 'ru')\r\n      }\r\n      return link\r\n    })\r\n\r\n\r\n    /* DO NOT DELETE\r\n\r\n    if (Object.keys(link.properties).length !== 0) {\r\n       link.label = Object.values(link.properties).join(\" \")\r\n    }\r\n    else {\r\n     link.label = translate(link.type, 'ru')\r\n   }\r\n    console.log('LINK', link)\r\n    return link\r\n  }) */\r\n\r\n    return dispGraph\r\n  };\r\n\r\n  const [windowHeight, setWindowHeight] = useState(window.innerHeight - 110);\r\n  const [windowWidth, setWindowWidth] = useState(window.innerWidth);\r\n\r\n  useEffect(() => {\r\n    function handleResize() {\r\n      setWindowHeight(window.innerHeight - 110);\r\n      setWindowWidth(window.innerWidth)\r\n    }\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  const myConfig = {\r\n    height: windowHeight,\r\n    width: windowWidth,\r\n    staticGraphWithDragAndDrop: props.newCoords ? true : false,\r\n    //height: 1000,\r\n    //width: 1000,\r\n    // staticGraphWithDragAndDrop: true,\r\n    // nodeHighlightBehavior: true,\r\n    node: {\r\n      labelProperty: \"dispLabel\",\r\n      fontSize: 14\r\n    },\r\n    //   color: \"lightgreen\",\r\n    //   labelProperty: 'label',\r\n    //   highlightStrokeColor: \"blue\",\r\n    //   size: 3300,\r\n    //   fontSize: 16\r\n    //\r\n    //\r\n    // }\r\n    // ,\r\n    \"d3\": {\r\n      \"alphaTarget\": 0.05,\r\n      \"gravity\": -100,\r\n      \"linkLength\": 100,\r\n      \"linkStrength\": 1,\r\n      \"disableLinkForce\": false\r\n    },\r\n    link: {\r\n      highlightColor: \"lightblue\",\r\n      renderLabel: true,\r\n      labelProperty: 'dispLabel'\r\n\r\n    },\r\n  };\r\n\r\n  const graphRef = useRef()\r\n\r\n  useEffect(()=> {\r\n    handlePosChange()\r\n  })\r\n\r\n  const handlePosChange = () => {\r\n    let nodes = graphRef.current.state.nodes\r\n    let coords = {}\r\n    for (const [key, value] of Object.entries(nodes)) {\r\n      coords[key] = {x: value.x, y: value.y}\r\n    }\r\n    props.returnCoords(coords)\r\n  }\r\n\r\n  return <Graph\r\n  ref={graphRef}\r\n    config={myConfig}\r\n    id=\"d3graph\" // id is mandatory, if no id is defined rd3g will throw an error\r\n    data={displayGraph(props)}\r\n    onNodePositionChange={(nodeId, x, y) => {\r\n      handlePosChange()\r\n    }}\r\n    onDoubleClickNode={(nodeId) => {\r\n      props.onNodeClick(nodeId)\r\n    }}\r\n  />\r\n}\r\n\r\nconst areEqual = (prevProps, nextProps) => {\r\n  return (prevProps.visibleGraph === nextProps.visibleGraph)\r\n    && (prevProps.invisibleGraph === nextProps.invisibleGraph)\r\n    && (prevProps.cardNodeIds === nextProps.cardNodeIds)\r\n}\r\n\r\nexport default React.memo(MGraph, areEqual);\r\n\r\n","\r\nexport function toGraph(result, graph) {\r\n    result.records.forEach((records, i) => {\r\n        records.keys.forEach((key) => {\r\n            const nodge = records.get(key)\r\n            if (nodge.hasOwnProperty('start')) { //Check if it is edge\r\n                graph.edges[nodge.identity.low] = {\r\n                    source: nodge.start.low,\r\n                    target: nodge.end.low,\r\n                    type: nodge.type,\r\n                    properties: nodge.properties\r\n                }\r\n            } else {\r\n                graph.nodes[nodge.identity.low] = {\r\n                    id: nodge.identity.low,\r\n                    labels: nodge.labels,\r\n                    properties: nodge.properties\r\n                }\r\n            }\r\n        })\r\n    })\r\n    return graph;\r\n}\r\nexport function reconcileGraphs(vGraph, iGraph) {\r\n    Object.keys(iGraph.edges).forEach((key) => {\r\n        if (Object.keys(vGraph.nodes).includes(iGraph.edges[key].source.toString()) &&\r\n            Object.keys(vGraph.nodes).includes(iGraph.edges[key].target.toString())) {\r\n            vGraph.edges[key] = iGraph.edges[key]\r\n        }\r\n    })\r\n    return vGraph\r\n}\r\n","import React, { Component } from 'react';\r\n\r\nimport neo4j from 'neo4j-driver'\r\nimport Immutable from 'immutable'\r\n\r\nimport './my-svg.svg'\r\nimport MGraph from \"../MGraph/MGraph\";\r\nimport * as gh from './graphHelpers.js'\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { Grid, Typography, Box } from '@material-ui/core';\r\n\r\nclass GraphComponent extends Component{\r\n\r\n  driver = neo4j.driver('bolt://neo4j.kloop.io:7687')\r\n\r\n  state = {\r\n    visibleGraph: Immutable.fromJS({nodes: {}, edges: {}}),\r\n    invisibleGraph: Immutable.fromJS({nodes: {}, edges: {}}),\r\n    cardNodeIds: Immutable.fromJS([9350, 18766, 371947]),\r\n    showSpinner: false,\r\n    showSmallSpinner: false\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.isGoClick !== this.props.isGoClick) {\r\n      this.goClick(this.props.cypherQuery)\r\n      this.props.goClick()\r\n    }\r\n    if (prevProps.isClearGraph !== this.props.isClearGraph) {\r\n      this.clearGraphs()\r\n      this.props.clearClick()\r\n    }\r\n  }\r\n\r\n  clearGraphs = () => {\r\n    this.setState({visibleGraph: Immutable.fromJS({nodes: {}, edges: {}}),\r\n                   invisibleGraph: Immutable.fromJS({nodes: {}, edges: {}})})\r\n  }\r\n\r\n  goClick = (query) => {\r\n    this.props.errorMessage('')\r\n    this.executeQuery(query)\r\n  }\r\n\r\n  executeQuery = (cypherQuery) => {\r\n    this.setState({showSpinner: true})\r\n    const session = this.driver.session()\r\n    session\r\n      .run(cypherQuery)\r\n      .then(result => {\r\n        let updatedVisibleGraph = gh.toGraph(result, this.state.visibleGraph.toJS())\r\n        const paramIDs = Object.keys(updatedVisibleGraph.nodes).toString()\r\n        this.setState({\r\n          visibleGraph: Immutable.fromJS(updatedVisibleGraph)\r\n        })\r\n        this.updateInvisible(paramIDs, updatedVisibleGraph, this.state.invisibleGraph.toJS()) \r\n      })\r\n      .catch(error => {\r\n        console.log(error)\r\n        this.props.errorMessage('Произошла ошибка во время выполнения запроса')\r\n      })\r\n      .then(() => {\r\n        session.close()\r\n        this.setState({showSpinner: false})\r\n      })\r\n\r\n  }\r\n\r\n  updateInvisible = (paramIDs, updatedVisibleGraph, invisibleGraph) => {\r\n    this.setState({showSmallSpinner: true})\r\n    const invisibleSession = this.driver.session()\r\n    invisibleSession\r\n      .run(\"MATCH (n)-[r]-(b) WHERE ID(n) in [\"+ paramIDs +\"] RETURN n, r, b\")\r\n      .then(result => {\r\n        const updatedInvisibleGraph = gh.toGraph(result,\r\n          invisibleGraph)\r\n        updatedVisibleGraph = gh.reconcileGraphs(updatedVisibleGraph,\r\n          updatedInvisibleGraph)\r\n        this.setState({\r\n          visibleGraph: Immutable.fromJS(updatedVisibleGraph),\r\n          invisibleGraph: Immutable.fromJS(updatedInvisibleGraph)\r\n        })\r\n      })\r\n      .catch(error => {\r\n        console.log(error)\r\n        this.props.errorMessage('Произошла ошибка при обработке связей')\r\n      })\r\n      .then(() => {\r\n        invisibleSession.close()\r\n        this.setState({showSmallSpinner: false})\r\n      })\r\n  }\r\n\r\n  mergeGraphs = (ids, vGraph, iGraph) => {\r\n    ids.forEach((id) => {\r\n      vGraph.edges[id] = iGraph.edges[id]\r\n      vGraph.nodes[vGraph.edges[id].source] = iGraph.nodes[iGraph.edges[id].source] \r\n      vGraph.nodes[vGraph.edges[id].target] = iGraph.nodes[iGraph.edges[id].target] \r\n    })\r\n    let updatedVisibleGraph = gh.reconcileGraphs(vGraph, iGraph)\r\n    this.updateInvisible(ids, updatedVisibleGraph, this.state.invisibleGraph.toJS())\r\n    updatedVisibleGraph = gh.reconcileGraphs(updatedVisibleGraph, this.state.invisibleGraph.toJS())\r\n    return updatedVisibleGraph\r\n  }\r\n\r\n  findNodes(nodes, edges, edgeIds) {\r\n    const foundNodes = {} \r\n    Object.keys(nodes).forEach(nodeKey => {\r\n      edgeIds.forEach(edgeId => {\r\n        if (nodes[nodeKey].id === edges[edgeId].source || nodes[nodeKey].id === edges[edgeId].target){\r\n          foundNodes[nodeKey] = nodes[nodeKey]\r\n        }\r\n      })\r\n    }) \r\n    return foundNodes\r\n  }\r\n\r\n  removeElements = (ids, vGraph, iGraph) => {\r\n    const innocentNodes = this.findNodes(vGraph.nodes, vGraph.edges, ids)\r\n    ids.forEach((id) => {\r\n      let nodeToRemove = vGraph.nodes[vGraph.edges[id].target]\r\n      if (!Object.keys(innocentNodes).includes(String(nodeToRemove.id))){\r\n        delete vGraph.nodes[vGraph.edges[id].target]\r\n        delete vGraph.edges[id]\r\n      }\r\n      // delete iGraph.nodes[iGraph.edges[id].source]\r\n      // delete iGraph.nodes[iGraph.edges[id].target]\r\n      // delete iGraph.edges[id]\r\n    })\r\n    return [vGraph, iGraph]\r\n  }\r\n\r\n  handleButtonClick = (ids) => {\r\n    const edges = Object.keys(this.state.visibleGraph.toJS().edges)\r\n    let visibleGraph = this.state.visibleGraph.toJS()\r\n    let invisibleGraph = this.state.invisibleGraph.toJS()\r\n    let updatedVisibleGraph = null\r\n    // if ids are already in visible graph\r\n    if (ids.every(el => edges.includes(el))) {\r\n      const graphs = this.removeElements(ids, visibleGraph, invisibleGraph)\r\n      updatedVisibleGraph = graphs[0]\r\n      ids = edges.filter(el => !ids.includes(el))\r\n    } else {\r\n      updatedVisibleGraph = this.mergeGraphs(ids, visibleGraph, invisibleGraph)\r\n      const nodes = this.findNodes(updatedVisibleGraph.nodes, updatedVisibleGraph.edges, ids)\r\n      this.updateInvisible(Object.keys(nodes), updatedVisibleGraph, invisibleGraph)\r\n    }\r\n    this.setState({visibleGraph: Immutable.fromJS(updatedVisibleGraph)})\r\n  }\r\n\r\n  removeFromArray = (nodeId) => {\r\n    let cardNodeIds = this.state.cardNodeIds.toJS()\r\n    const idIndex = cardNodeIds.indexOf(parseInt(nodeId))\r\n    if (idIndex > -1) {\r\n      cardNodeIds.splice(idIndex, 1)\r\n    }\r\n    return cardNodeIds\r\n  }\r\n\r\n  addToArray = (nodeId) => {\r\n    let cardNodeIds = this.state.cardNodeIds.toJS()\r\n    const idIndex = cardNodeIds.indexOf(parseInt(nodeId))\r\n    if (idIndex === -1) {\r\n      cardNodeIds.push(parseInt(nodeId))\r\n    }\r\n    return cardNodeIds\r\n  }\r\n\r\n  handleMinimezeClick = (nodeId) => {\r\n    console.log('minimize clicked', nodeId)\r\n    const cardNodeIds = this.removeFromArray(nodeId)\r\n    this.setState({cardNodeIds: Immutable.fromJS(cardNodeIds)})\r\n  }\r\n\r\n  handleNodeClick = (nodeId) => {\r\n    console.log('node clicked', nodeId)\r\n    if (!this.state.cardNodeIds.toJS().includes(parseInt(nodeId))){\r\n      const cardNodeIds = this.addToArray(nodeId)\r\n      this.setState({cardNodeIds: Immutable.fromJS(cardNodeIds)})\r\n    }\r\n  }\r\n\r\n  returnSpinner = () => {\r\n    return (\r\n    <div style = {{\r\n      position: 'absolute',\r\n      height: '100px',\r\n      width: '100px',\r\n      top: '50%',\r\n      left: '50%',\r\n      marginLeft: '-50px',\r\n      marginTop: '-50px',\r\n      }}>\r\n      <CircularProgress size={100} style={{color: 'grey'}}/>\r\n    </div>\r\n    )\r\n  }\r\n\r\n  returnSmallSpinner = () => {\r\n    return (\r\n      <Grid container alignContent=\"flex-end\" direction=\"column\" style={{position:\"absolute\", right:0,paddingRight: \"10px\"}}>\r\n        <Box>\r\n          <CircularProgress size={32} style={{color: 'grey'}}/>\r\n        </Box>\r\n        <Typography variant=\"body2\" component=\"p\" style={{fontSize: \"12px\"}}>Cвязи загружаются</Typography>\r\n      </Grid>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    let graph = null\r\n    if (Object.keys(this.state.visibleGraph.toJS().nodes).length !== 0) {\r\n      graph = <MGraph \r\n        onButtonClick={this.handleButtonClick}\r\n        onMinimizeClick={this.handleMinimezeClick}\r\n        onNodeClick={this.handleNodeClick}\r\n        visibleGraph={this.state.visibleGraph}\r\n        invisibleGraph={this.state.invisibleGraph}\r\n        cardNodeIds={this.state.cardNodeIds}\r\n        returnCoords={this.props.returnCoords}\r\n        newCoords={this.props.newCoords}\r\n        />\r\n    }\r\n    return(\r\n      <div>\r\n        {this.state.showSmallSpinner ? this.returnSmallSpinner(): null}\r\n        {this.state.showSpinner ? this.returnSpinner() : graph}\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default GraphComponent","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport List from '@material-ui/core/List';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport LoopIcon from '@material-ui/icons/Loop';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  appBar: {\r\n    background: 'transparent',\r\n    boxShadow: 'none',\r\n    transition: theme.transitions.create(['margin', 'width'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n  appBarShift: {\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    marginLeft: drawerWidth,\r\n    transition: theme.transitions.create(['margin', 'width'], {\r\n      easing: theme.transitions.easing.easeOut,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  menuButton: {\r\n    color: 'gray',\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  hide: {\r\n    display: 'none',\r\n  },\r\n  drawer: {\r\n    width: drawerWidth,\r\n    flexShrink: 0,\r\n  },\r\n  drawerPaper: {\r\n    width: drawerWidth,\r\n  },\r\n  drawerHeader: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    padding: theme.spacing(0, 1),\r\n    // necessary for content to be below app bar\r\n    ...theme.mixins.toolbar,\r\n    justifyContent: 'flex-end',\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(3),\r\n    transition: theme.transitions.create('margin', {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    marginLeft: -drawerWidth,\r\n  },\r\n  contentShift: {\r\n    transition: theme.transitions.create('margin', {\r\n      easing: theme.transitions.easing.easeOut,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    marginLeft: 0,\r\n  },\r\n  searchBar: {\r\n    width: '600px', \r\n    paddingLeft: 13, \r\n    paddingRight: 13,\r\n    border: '2px solid gray', \r\n    borderRadius: 25,\r\n  },\r\n}));\r\n\r\nexport default function PersistentDrawerLeft(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleDrawerOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleDrawerClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <CssBaseline />\r\n      <AppBar\r\n        position=\"fixed\"\r\n        className={clsx(classes.appBar, {\r\n          [classes.appBarShift]: open,\r\n        })}\r\n      >\r\n        <Toolbar>\r\n          <IconButton\r\n            color=\"inherit\"\r\n            aria-label=\"open drawer\"\r\n            onClick={handleDrawerOpen}\r\n            edge=\"start\"\r\n            className={clsx(classes.menuButton, open && classes.hide)}\r\n          >\r\n            <MenuIcon />\r\n          </IconButton>\r\n          <TextField\r\n          style={{color: 'grey'}}\r\n          className={classes.searchBar}\r\n          value={props.searchText}\r\n          onChange={props.handleSearchTextChange}\r\n          placeholder=\"Поиск...\"\r\n          onKeyPress = {(event) => {\r\n            if (event.key === 'Enter') {\r\n              props.handleGoClick();\r\n            }\r\n          }}\r\n          InputProps={{\r\n            disableUnderline: true,\r\n            inputProps: {\r\n              'aria-label': \"Search\"\r\n            }\r\n          }}\r\n        />\r\n        <Tooltip title=\"Поиск\">\r\n          <IconButton aria-label=\"search\" onClick={props.handleGoClick}>\r\n            <SearchIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n        <Tooltip title=\"Обновить\">\r\n          <IconButton aria-label=\"reset\" onClick={props.handleResetClick}>\r\n            <LoopIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n        <Tooltip title=\"Очистить\">\r\n          <IconButton aria-label=\"clear\" onClick={props.handleClearClick}>\r\n            <ClearIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <Drawer\r\n        className={classes.drawer}\r\n        variant=\"persistent\"\r\n        anchor=\"left\"\r\n        open={open}\r\n        classes={{\r\n          paper: classes.drawerPaper,\r\n        }}\r\n      >\r\n        <div className={classes.drawerHeader}>\r\n          <IconButton onClick={handleDrawerClose}>\r\n            {theme.direction === 'ltr' ? <ChevronLeftIcon /> : <ChevronRightIcon />}\r\n          </IconButton>\r\n        </div>\r\n        <Divider />\r\n        <List>\r\n        {['Введите запрос:'].map((text, index) => (\r\n          <ListItem key={text}>\r\n            <ListItemText primary={text} />\r\n          </ListItem>\r\n          \r\n        ))}\r\n      </List>\r\n      <List>\r\n          <TextField\r\n           id=\"query\"\r\n           label=\"Запрос\"\r\n           variant=\"outlined\" \r\n           multiline\r\n           value={props.cypherQuery}\r\n           onChange={props.handleCypherQueryTextChange} />\r\n      </List>\r\n      <List>\r\n        <Button variant=\"contained\"\r\n                className={classes.GoButton}\r\n                onClick={props.handleGoClick}\r\n                startIcon={<PlayArrowIcon />}>Поиск</Button>\r\n      </List>\r\n      <List>\r\n          <TextField\r\n           id=\"coords\"\r\n           label=\"Координаты\"\r\n           variant=\"outlined\" \r\n           multiline\r\n           value={JSON.stringify(props.nodeCoords)}/>\r\n      </List>\r\n      </Drawer>\r\n      <main style={{padding: 0, height: '100%'}}\r\n        className={clsx(classes.content, {\r\n          [classes.contentShift]: open,\r\n        })}\r\n      >\r\n        <div className={classes.drawerHeader} />\r\n        {props.children}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Component } from 'react';\r\nimport './App.css';\r\nimport './my-svg.svg'\r\nimport GraphComponent from './components/GraphComponent'\r\nimport Pagination from '@material-ui/lab/Pagination';\r\nimport queryString from 'query-string'\r\nimport AppSideBar from './SideBar/AppSideBar'\r\nimport Grid from '@material-ui/core/Grid'\r\n\r\nconst axios = require('axios').default;\r\n\r\nclass App extends Component {\r\n\r\n  state = {\r\n    cypherQuery: \"MATCH (n) where id(n) in [2437183, 18766, 2460290, 371947, 9350, 2437735, 1150073] return n\",\r\n    searchText: \"\",\r\n    goClick: false,\r\n    clearGraph: false,\r\n    listOfNodes: [],\r\n    showPagination: false,\r\n    errorMessage: '',\r\n    newCoords: null,\r\n    coords: {}\r\n  }\r\n\r\n  componentDidMount() { \r\n    let urlString =  queryString.parse(window.location.search, {decode: false})\r\n    let query = ''\r\n    console.log(\"URL STRING\", urlString)\r\n    if (urlString.nodes) {\r\n      query = \"MATCH (n) where id(n) in [\" + urlString.nodes + \"] return n\"\r\n      console.log(\"NODES\", query)\r\n      this.setState({cypherQuery: query})\r\n      this.handleGoClick()\r\n    }\r\n    else if (urlString.url) {\r\n      console.log(\"urlString\", urlString)\r\n      this.fetchData(urlString)\r\n    }\r\n    else if (urlString.coords) {\r\n      let dec = decodeURI(urlString.coords);\r\n      let obj = JSON.parse(dec)\r\n      console.log(obj)\r\n      let ids = Object.keys(obj)\r\n      query = \"MATCH (n) where id(n) in [\" + ids + \"] return n\"\r\n      this.setState({newCoords: obj})\r\n      this.setState({cypherQuery: query})\r\n      this.handleGoClick()\r\n    }\r\n  }\r\n\r\n  handleCypherQueryTextChange = (event) => {\r\n    this.setState({cypherQuery: event.target.value})\r\n  }\r\n\r\n  handleSearchTextChange = (event) => {\r\n    let query = \"MATCH (n) where n.text_search =~ '.*\" + event.target.value.toLowerCase() + \".*' return n\"\r\n    this.setState({searchText: event.target.value, cypherQuery: query})\r\n  }\r\n\r\n  handlePaginationChange = (event, value) => {\r\n    this.handleClearClick()\r\n    let nodes = this.state.listOfNodes[value - 1]\r\n    let query = \"MATCH (n) where id(n) in [\" + nodes.join() + \"] return n\"\r\n    this.setState({cypherQuery: query})\r\n    this.handleGoClick()\r\n  }\r\n\r\n  fetchData = (urlString) => {\r\n    axios.get(urlString.url, {\r\n      params: {\r\n        token: urlString.token\r\n      }\r\n    })\r\n    .then(response => {\r\n      // handle success\r\n      console.log(response);\r\n      let query = \"MATCH (n) where id(n) in [\" + response.data[0].join() + \"] return n\"\r\n      console.log(query)\r\n      this.setState({listOfNodes: response.data, showPagination: true, cypherQuery: query})\r\n      this.handleGoClick()\r\n    })\r\n    .catch(error => {\r\n      // handle error\r\n      this.setState({errorMessage: 'Произошла ошибка при запросе данных. Проверье интернет-соединение' })\r\n      console.log('There has been a problem with your fetch operation: ' + error.message);\r\n    })\r\n  }\r\n\r\n  handleGoClick = () => {\r\n    this.setState({goClick: true});\r\n    console.log('go button clicked')\r\n    console.log('state goClicked ', this.state.goClick)\r\n  }\r\n\r\n  goClick = () => {\r\n    this.setState({goClick: false})\r\n  }\r\n\r\n  handleClearClick = () => {\r\n    this.setState({clearGraph: true})\r\n  }\r\n\r\n  clearClick = () => {\r\n    this.setState({clearGraph: false})\r\n  }\r\n\r\n  handleResetClick = () => {\r\n    this.handleClearClick()\r\n    this.handleGoClick()\r\n  }\r\n  handleError = (errorMessage) => {\r\n    this.setState({errorMessage: errorMessage})\r\n  }\r\n\r\n  returnPagination = () => {\r\n    return (\r\n      <Grid container justify=\"center\" style={{\r\n        position: 'absolute',\r\n        left: '50%',\r\n        bottom: '10px',\r\n        WebkitTransform: 'translateX(-50%)',\r\n        transform: 'translateX(-50%)'\r\n        }} >\r\n      <Pagination count={this.state.listOfNodes.length} onChange={this.handlePaginationChange} size=\"small\" showFirstButton showLastButton />\r\n    </Grid>\r\n    )\r\n  }\r\n\r\n  returnCoords = (obj) => {\r\n    this.setState({coords: obj})\r\n  }\r\n  \r\n  render() {\r\n    return(\r\n      <div className='App'>\r\n        <AppSideBar \r\n          cypherQuery={this.state.cypherQuery}\r\n          handleCypherQueryTextChange={this.handleCypherQueryTextChange}\r\n          searchText={this.state.searchText}\r\n          handleSearchTextChange={this.handleSearchTextChange}\r\n          handleGoClick={this.handleGoClick} \r\n          handleResetClick={this.handleResetClick}\r\n          handleClearClick={this.handleClearClick}\r\n          nodeCoords={this.state.coords}\r\n          >\r\n          {this.state.errorMessage &&\r\n            <h3 className=\"error\"> { this.state.errorMessage } </h3> }\r\n          <GraphComponent \r\n            cypherQuery={this.state.cypherQuery}\r\n            isGoClick={this.state.goClick}\r\n            goClick={this.goClick}\r\n            isClearGraph={this.state.clearGraph}\r\n            clearClick={this.clearClick}\r\n            errorMessage={this.handleError}\r\n            returnCoords={this.returnCoords}\r\n            newCoords={this.state.newCoords}\r\n            />\r\n            {this.state.showPagination? this.returnPagination() : null}\r\n        </AppSideBar>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}